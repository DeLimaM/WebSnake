<!DOCTYPE html>
<html>

<head>
    <script>
        console.log('Starting WebSocket connection...');
        const ws = new WebSocket('ws://localhost:8080');

        document.addEventListener('keydown', (e) => {
            let direction = null;
            switch (e.key) {
                case 'ArrowUp': direction = 'up'; break;
                case 'ArrowDown': direction = 'down'; break;
                case 'ArrowLeft': direction = 'left'; break;
                case 'ArrowRight': direction = 'right'; break;
            }
            if (direction) {
                console.log('Sending direction:', direction);
                ws.send(JSON.stringify({ direction }));
            }
        });

        ws.onopen = () => {
            console.log('WebSocket connection established:', new Date().toISOString());
        };

        ws.onerror = (error) => {
            console.error('WebSocket error:', error);
        };

        ws.onclose = () => {
            console.log('WebSocket connection closed:', new Date().toISOString());
        };

        ws.onmessage = (event) => {
            console.log('Message received:', new Date().toISOString());
            document.body.innerHTML = event.data;
        };
    </script>
    <style>
        .board {
            font-family: monospace;
        }

        .cell {
            display: inline-block;
            width: 20px;
            height: 20px;
        }

        .snake {
            background-color: green;
        }

        .food {
            background-color: red;
        }

        .empty {
            background-color: #eee;
        }
    </style>
</head>

<body>
    <div class="board">
        <!-- GAME_BOARD -->
    </div>
    <div class="info">
        <!-- GAME_INFO -->
    </div>
</body>

</html>